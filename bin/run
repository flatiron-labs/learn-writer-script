#!/usr/bin/env ruby

require_relative "../config/environment"

# get the secret octo_token
secrets = YAML::load(File.open(Dir.pwd + '/config/application.yml'))

repos = ["https://github.com/talum/test-writer"]
#VALID STRATEGIES:
# OpenSource
# ToggleToReadme
strategy = ARGV.first

# parse CSV of repo urls
csv_path = ARGV[1]

#repos = CSV.read(csv_path)
repos = repos.map { |repo| Repo.new(repo) }
# prompt for either open sourcer or toggle to readme
# classify and execute
repos.each do |repo|
  Object.const_get(strategy).new(repo, secrets).execute
end

